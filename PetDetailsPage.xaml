<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:models="clr-namespace:Lab_2_layout.Models"
             x:Class="Lab_2_layout.PetDetailsPage"
             BackgroundColor="{AppThemeBinding Light=White, Dark=#1C1C1E}"
             Title="Pet Details">

    <Grid RowDefinitions="Auto, Auto, Auto, *, Auto" RowSpacing="0">

        <Grid Grid.Row="0" BackgroundColor="#5A009C" HeightRequest="50">
            <Label Text="Welcome to Tony BCS23020003"
                   TextColor="White"
                   FontSize="16"
                   HorizontalOptions="Center"
                   VerticalOptions="Center" />
        </Grid>

        <Image Grid.Row="1"
               Source="{Binding ImageUrl}"
               Aspect="AspectFill"
               HeightRequest="300"
               HorizontalOptions="Fill" />
        <Border Grid.Row="2"
                Margin="0,-50,0,0"
                StrokeThickness="0"
                BackgroundColor="{AppThemeBinding Light=White, Dark=#333333}"
                Padding="20"
                VerticalOptions="Start">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="20" />
            </Border.StrokeShape>
            <Border.Shadow>
                <Shadow Brush="Black" Offset="10,10" Radius="20" Opacity="0.3" />
            </Border.Shadow>

            <VerticalStackLayout Spacing="5">
                <Grid ColumnDefinitions="*,Auto">
                    <Label Grid.Column="0" Text="{Binding Name}" FontSize="24" FontAttributes="Bold" TextColor="{AppThemeBinding Light=Black, Dark=White}" />
                    <Image Grid.Column="1" Source="{Binding Gender, Converter={StaticResource GenderToImageConverter}}" WidthRequest="20" HeightRequest="20" VerticalOptions="Center" />
                </Grid>
                <Label Text="{Binding Breed}" FontSize="16" TextColor="{AppThemeBinding Light=Gray, Dark=LightGray}" />

                <Grid ColumnDefinitions="Auto,*,Auto,*" Margin="0,5,0,0">
                    <Image Grid.Column="0" Source="location_icon.png" WidthRequest="15" HeightRequest="15" VerticalOptions="Center" />
                    <Label Grid.Column="1" Text="{Binding Location}" FontSize="12" TextColor="{AppThemeBinding Light=Gray, Dark=LightGray}" Margin="5,0,0,0" />

                    <Image Grid.Column="2" Source="time_icon.png" WidthRequest="15" HeightRequest="15" VerticalOptions="Center" Margin="10,0,0,0" />
                    <Label Grid.Column="3" Text="{Binding Age, StringFormat='{0} year old'}" FontSize="12" TextColor="{AppThemeBinding Light=Gray, Dark=LightGray}" Margin="5,0,0,0" />
                </Grid>
            </VerticalStackLayout>
        </Border>

        <VerticalStackLayout Grid.Row="3" Padding="20,10,20,0" Spacing="15">
            <Grid ColumnDefinitions="Auto,*,Auto">

                <Border Grid.Column="0" 
                        WidthRequest="60" 
                        HeightRequest="60">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="30" />
                    </Border.StrokeShape>
                    <Image Source="{Binding OwnerImageUrl}" Aspect="AspectFill" />
                </Border>

                <VerticalStackLayout Grid.Column="1" Margin="10,0,0,0" VerticalOptions="Center">
                    <Label Text="{Binding OwnerName}" FontAttributes="Bold" FontSize="18" TextColor="{AppThemeBinding Light=Black, Dark=White}" />
                    <Label Text="Owner" FontSize="14" TextColor="{AppThemeBinding Light=Gray, Dark=LightGray}" />
                </VerticalStackLayout>
                <Label Grid.Column="2" Text="{Binding OwnerDate}" FontSize="14" TextColor="{AppThemeBinding Light=Gray, Dark=LightGray}" VerticalOptions="Center" />
            </Grid>

            <Label Text="{Binding Description}"
                   FontSize="16"
                   LineBreakMode="WordWrap"
                   TextColor="{AppThemeBinding Light=Black, Dark=White}" />
        </VerticalStackLayout>

        <Grid Grid.Row="4" ColumnDefinitions="*,*" Padding="20" BackgroundColor="{AppThemeBinding Light=White, Dark=#1C1C1E}">

            <Border Grid.Column="0"
                    x:Name="HeartFrame" 
                    Stroke="Gray"
                    StrokeThickness="1"
                    BackgroundColor="Transparent" 
                    Padding="0" 
                    HeightRequest="50"
                    HorizontalOptions="Start" 
                    VerticalOptions="Center" 
                    WidthRequest="50" 
                    Margin="0,0,0,0">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="25" />
                </Border.StrokeShape>
                <Border.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnHeartTapped" />
                </Border.GestureRecognizers>

                <Image Source="heart_icon.png" 
                       x:Name="HeartImage"
                       WidthRequest="25" 
                       HeightRequest="25" 
                       VerticalOptions="Center" 
                       HorizontalOptions="Center" />
            </Border>

            <Button Grid.Column="1"
                    x:Name="AdoptionButton"
                    Text="Adoption"
                    BackgroundColor="#FFD700"
                    TextColor="Black"
                    CornerRadius="25"
                    HeightRequest="50"
                    FontSize="18"
                    FontAttributes="Bold"
                    Clicked="OnAdoptionButtonClicked" />
        </Grid>

    </Grid>
</ContentPage>